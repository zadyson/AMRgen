<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Download antimicrobial genotype or phenotype data from the EBI AMR Portal — download_ebi • AMRgen</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Nunito-0.4.10/font.css" rel="stylesheet"><link href="../deps/Fira_Code-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Download antimicrobial genotype or phenotype data from the EBI AMR Portal — download_ebi"><meta name="description" content="This function will retrieve genotype or phenotype data from the EBI AMR Portal FTP site. The portal uses AMRfinderplus to identify AMR-associated genotypes, but the results are processed and not all fields returned by AMRfinderplus are included.
Optionally, the function can also reformat the phenotype data for easy use with AMRgen functions (using import_ebi_ast_ftp) and re-interpret assay measures using the latest breakpoints/ECOFF."><meta property="og:description" content="This function will retrieve genotype or phenotype data from the EBI AMR Portal FTP site. The portal uses AMRfinderplus to identify AMR-associated genotypes, but the results are processed and not all fields returned by AMRfinderplus are included.
Optionally, the function can also reformat the phenotype data for easy use with AMRgen functions (using import_ebi_ast_ftp) and re-interpret assay measures using the latest breakpoints/ECOFF."><meta property="og:image" content="https://AMRverse.github.io/AMRgen/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">AMRgen</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span> Home</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-book-open"></span> Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/AnalysingGenoPhenoData.html"><span class="fa fa-book"></span> Vignettes</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/AMRverse/AMRgen"><span class="fa fab fa-github"></span> Source Code</a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Download antimicrobial genotype or phenotype data from the EBI AMR Portal</h1>
      <small class="dont-index">Source: <a href="https://github.com/AMRverse/AMRgen/blob/main/R/download_ebi.R" class="external-link"><code>R/download_ebi.R</code></a></small>
      <div class="d-none name"><code>download_ebi.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function will retrieve genotype or phenotype data from the EBI AMR Portal FTP site. The portal uses AMRfinderplus to identify AMR-associated genotypes, but the results are processed and not all fields returned by AMRfinderplus are included.
Optionally, the function can also reformat the phenotype data for easy use with AMRgen functions (using <a href="import_ebi_ast_ftp.html">import_ebi_ast_ftp</a>) and re-interpret assay measures using the latest breakpoints/ECOFF.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">download_ebi</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="st">"phenotype"</span>,</span>
<span>  antibiotic <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  force_antibiotic <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  genus <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  species <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  geno_subclass <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  geno_class <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  remove_dup <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  release <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  reformat <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  interpret_eucast <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  interpret_clsi <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  interpret_ecoff <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>String specifying the type of data to download, either "phenotype" or "genotype" (default "phenotype").</p></dd>


<dt id="arg-antibiotic">antibiotic<a class="anchor" aria-label="anchor" href="#arg-antibiotic"></a></dt>
<dd><p>(Optional) String (or vector of strings) specifying the antibiotic name/s to filter on (default NULL). Uses the AMR package to try to fix typos, and format to lower-case for EBI files. Not used if <code>data</code>="genotype" and <code>class</code> or <code>subclass</code> is specified.</p></dd>


<dt id="arg-force-antibiotic">force_antibiotic<a class="anchor" aria-label="anchor" href="#arg-force-antibiotic"></a></dt>
<dd><p>(Optional) Logical indicating whether to turn off parsing of antibiotic names and match exactly on the input strings (default FALSE).</p></dd>


<dt id="arg-genus">genus<a class="anchor" aria-label="anchor" href="#arg-genus"></a></dt>
<dd><p>(Optional) String specifying a bacterial genus to filter on (default NULL, will pull all taxa).</p></dd>


<dt id="arg-species">species<a class="anchor" aria-label="anchor" href="#arg-species"></a></dt>
<dd><p>(Optional) String specifying a bacterial species to filter on (default NULL, will pull all taxa). Not used if genus is specified.</p></dd>


<dt id="arg-geno-subclass">geno_subclass<a class="anchor" aria-label="anchor" href="#arg-geno-subclass"></a></dt>
<dd><p>(Optional) String specifying an antibiotic subclass to filter genotype data on (default NULL). Filter is based on string match, not identity, so e.g. subclass="TRIMETHOPRIM" will return all rows where the string "TRIMETHOPRIM" is included in the subclass field. Only used if <code>data</code>="genotype". Check <a href="https://github.com/ncbi/amr/wiki/class-subclass" class="external-link">NCBI AMR Class-Subclass Reference</a> for valid terms.</p></dd>


<dt id="arg-geno-class">geno_class<a class="anchor" aria-label="anchor" href="#arg-geno-class"></a></dt>
<dd><p>(Optional) String specifying an antibiotic subclass to filter genotype data on (default NULL). Filter is based on string match, not identity, so e.g. class="TRIMETHOPRIM" will return all rows where the string "TRIMETHOPRIM" is included in the class field. Only used if <code>data</code>="genotype" and subclass is not specified. Check <a href="https://github.com/ncbi/amr/wiki/class-subclass" class="external-link">NCBI AMR Class-Subclass Reference</a> for valid terms.</p></dd>


<dt id="arg-remove-dup">remove_dup<a class="anchor" aria-label="anchor" href="#arg-remove-dup"></a></dt>
<dd><p>(Optional) Logical specifying whether to clean up genotype data by removing duplicates for the same hit (default FALSE). Where a detected gene is associated with a subclass value that is actually a list of multiple drugs/classes, e.g. subclass="GENTAMICIN/TOBRAMYCIN", the EBI data table will have duplicate rows for the same gene hit, but with different values for the <code>antibiotic_name</code> and associated <code>antibiotic_ontology</code> and <code>antibiotic_ontology_link</code> annotation fields (e.g. one row each for gentamicin and tobramycin). To remove these duplicate rows (and the drug-specific annotation fields) and return only one row per hit (i.e. restoring AMRfinderplus output format), set this to <code>TRUE</code>.</p></dd>


<dt id="arg-release">release<a class="anchor" aria-label="anchor" href="#arg-release"></a></dt>
<dd><p>(Optional) String specifying the data release to download (default NULL, will pull latest release).</p></dd>


<dt id="arg-reformat">reformat<a class="anchor" aria-label="anchor" href="#arg-reformat"></a></dt>
<dd><p>(Optional) Logical specifying whether to reformat the downloaded data for easy use with downstream AMRgen functions, using <a href="import_ebi_ast_ftp.html">import_ebi_ast_ftp</a> (phenotypes) or <a href="import_amrfp_ebi_ftp.html">import_amrfp_ebi_ftp</a>. Default <code>FALSE</code>. This does things like format the antibiotic, measurement, and phenotype columns to AMR package classes. If set to <code>TRUE</code> you can also turn on re-interpreting MIC/disk data using latest EUCAST/CLSI breakpoints (when <code>data</code>="phenotype"). No columns are removed from the downloaded data frame, but key fields are renamed, see documentation for <a href="format_ast.html">format_ast</a> and <a href="import_amrfp_ebi_ftp.html">import_amrfp_ebi_ftp</a>.</p></dd>


<dt id="arg-interpret-eucast">interpret_eucast<a class="anchor" aria-label="anchor" href="#arg-interpret-eucast"></a></dt>
<dd><p>(Optional) Logical specifying whether to re-interpret the susceptibility phenotype (SIR) for each row based on the MIC or disk diffusion values, against EUCAST human breakpoints. These will be reported in a new column <code>pheno_eucast</code>, of class <code>sir</code>. Only used when downloading phenotype data, with reformat set to <code>TRUE</code>.</p></dd>


<dt id="arg-interpret-clsi">interpret_clsi<a class="anchor" aria-label="anchor" href="#arg-interpret-clsi"></a></dt>
<dd><p>(Optional) Logical specifying whether to re-interpret the susceptibility phenotype (SIR) for each row based on the MIC or disk diffusion values, against CLSI human breakpoints. These will be reported in a new column <code>pheno_clsi</code>, of class <code>sir</code>. Only used when downloading phenotype data, with reformat set to <code>TRUE</code>.</p></dd>


<dt id="arg-interpret-ecoff">interpret_ecoff<a class="anchor" aria-label="anchor" href="#arg-interpret-ecoff"></a></dt>
<dd><p>(Optional) Logical specifying whether to re-interpret the wildtype vs nonwildtype status for each row based on the MIC or disk diffusion values, against epidemiological cut-off (ECOFF) values. These will be reported in a new column <code>ecoff</code>, of class <code>sir</code> and coded as <code>R</code> (nonwildtype) or <code>S</code> (wildtype). Only used when downloading phenotype data, with reformat set to <code>TRUE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame containing the phenotype or genotype data retrieved from EBI, optionally reformatted to AMRgen standard formats and classes.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>See <a href="https://www.ebi.ac.uk/amr/about/" class="external-link">https://www.ebi.ac.uk/amr/about/</a> for more information on what is available in the portal, and <a href="https://github.com/ncbi/amr/wiki/class-subclass" class="external-link">https://github.com/ncbi/amr/wiki/class-subclass</a> for valid class and subclass terms.</p>
<p>Note the function downloads the full genotype or phenotype data table before filtering on the provided parameters, so if you are having trouble with drug/class names not matching then just run without specifying any genus/species/antibiotic/class filters, to get the full unfiltered table and explore the field values to filter manually to get what you want.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># download all phenotype data from EBI</span></span></span>
<span class="r-in"><span><span class="va">pheno_ebi</span> <span class="op">&lt;-</span> <span class="fu">download_ebi</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># download phenotype data from Dec 2025 release, and filter to Salmonella</span></span></span>
<span class="r-in"><span><span class="va">pheno_salmonella</span> <span class="op">&lt;-</span> <span class="fu">download_ebi</span><span class="op">(</span></span></span>
<span class="r-in"><span>  genus <span class="op">=</span> <span class="st">"Salmonella"</span>,</span></span>
<span class="r-in"><span>  release <span class="op">=</span> <span class="st">"2025-12"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># reformat downloaded phenotype data to simplify use with AMRgen functions</span></span></span>
<span class="r-in"><span><span class="va">pheno_salmonella</span> <span class="op">&lt;-</span> <span class="fu"><a href="import_ebi_ast_ftp.html">import_ebi_ast_ftp</a></span><span class="op">(</span><span class="va">pheno_salmonella</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># download phenotype data for Salmonella, filter to ampicillin and ciprofloxacin</span></span></span>
<span class="r-in"><span><span class="va">pheno_salmonella</span> <span class="op">&lt;-</span> <span class="fu">download_ebi</span><span class="op">(</span></span></span>
<span class="r-in"><span>  genus <span class="op">=</span> <span class="st">"Salmonella"</span>,</span></span>
<span class="r-in"><span>  antibiotic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ampicillin"</span>, <span class="st">"Cipro"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># download phenotype data for Staphylococcus aureus and reformat</span></span></span>
<span class="r-in"><span><span class="co"># for use with AMRgen functions</span></span></span>
<span class="r-in"><span><span class="va">pheno_staph</span> <span class="op">&lt;-</span> <span class="fu">download_ebi</span><span class="op">(</span></span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"Staphylococcus aureus"</span>,</span></span>
<span class="r-in"><span>  reformat <span class="op">=</span> <span class="cn">T</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># download phenotype data for Klebsiella quasipneumoniae, reformat</span></span></span>
<span class="r-in"><span><span class="co"># for use with AMRgen functions, and re-interpret phenotypes</span></span></span>
<span class="r-in"><span><span class="va">pheno_kquasi_reinterpreted</span> <span class="op">&lt;-</span> <span class="fu">download_ebi</span><span class="op">(</span></span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"Klebsiella quasipneumoniae"</span>,</span></span>
<span class="r-in"><span>  reformat <span class="op">=</span> <span class="cn">T</span>,</span></span>
<span class="r-in"><span>  interpret_eucast <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  interpret_clsi <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  interpret_ecoff <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># download all available genotype data</span></span></span>
<span class="r-in"><span><span class="va">ebi_geno</span> <span class="op">&lt;-</span> <span class="fu">download_ebi</span><span class="op">(</span>data <span class="op">=</span> <span class="st">"genotype"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># download genotype data for Klebsiella pneumoniae, and filter to </span></span></span>
<span class="r-in"><span><span class="co"># markers assigned to NCBI class 'TRIMETHOPRIM'</span></span></span>
<span class="r-in"><span><span class="va">geno_kpn_tmp</span> <span class="op">&lt;-</span> <span class="fu">download_ebi</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="st">"genotype"</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"Klebsiella pneumoniae"</span>,</span></span>
<span class="r-in"><span>  geno_subclass <span class="op">=</span> <span class="st">"TRIMETHOPRIM"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># download genotype data for Klebsiella pneumoniae, and filter to </span></span></span>
<span class="r-in"><span><span class="co"># markers assigned to NCBI class 'TRIMETHOPRIM' or 'QUINOLONE'</span></span></span>
<span class="r-in"><span><span class="va">geno_kpn_tmp</span> <span class="op">&lt;-</span> <span class="fu">download_ebi</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="st">"genotype"</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"Klebsiella pneumoniae"</span>,</span></span>
<span class="r-in"><span>  geno_subclass <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TRIMETHOPRIM"</span>, <span class="st">"QUINOLONE"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># download genotype data for Klebsiella pneumoniae, and filter to </span></span></span>
<span class="r-in"><span><span class="co"># markers associated with CARD drug term 'trimethoprim'</span></span></span>
<span class="r-in"><span><span class="va">geno_kpn_tmp</span> <span class="op">&lt;-</span> <span class="fu">download_ebi</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="st">"genotype"</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"Klebsiella pneumoniae"</span>,</span></span>
<span class="r-in"><span>  antibiotic <span class="op">=</span> <span class="st">"trimethoprim"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Free and Open Source (GPL-3), brought by AMRverse/AMRgen Development Team</p>
</div>

<div class="pkgdown-footer-right">
  <p>Our goal is to develop interpretive standards for AMR genotypes, akin to the interpretive standards developed by EUCAST and CLSI for antimicrobial susceptibility phenotyping.</p>
</div>

    </footer></div>





  </body></html>

